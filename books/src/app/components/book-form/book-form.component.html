<!-- Formulaire simple pour étudiant -->
<form #bookForm="ngForm" (ngSubmit)="onSubmit(bookForm)" class="simple-form">
  
  <!-- Titre -->
  <div class="field">
    <label for="title">Titre du livre *</label>
    <input 
      type="text" 
      id="title" 
      name="title"
      [(ngModel)]="book.title"
      #title="ngModel"
      required
      minlength="3"
      placeholder="Ex: Le Petit Prince">
    
    <div *ngIf="title.invalid && title.dirty" class="error">
      <span *ngIf="title.errors?.['required']">Le titre est obligatoire</span>
      <span *ngIf="title.errors?.['minlength']">Le titre doit avoir au moins 3 caractères</span>
    </div>
    
    <div *ngIf="title.dirty && isTitleOnlyNumbers(book.title || '')" class="error">
      Le titre ne peut pas être que des chiffres
    </div>
  </div>

  <!-- Auteur -->
  <div class="field">
    <label for="author">Nom de l'auteur *</label>
    <input 
      type="text" 
      id="author" 
      name="author"
      [(ngModel)]="book.author"
      #author="ngModel"
      required
      minlength="3"
      placeholder="Ex: Antoine de Saint-Exupéry">
    
    <div *ngIf="author.invalid && author.dirty" class="error">
      <span *ngIf="author.errors?.['required']">L'auteur est obligatoire</span>
      <span *ngIf="author.errors?.['minlength']">L'auteur doit avoir au moins 3 caractères</span>
    </div>
  </div>

  <!-- Email éditeur -->
  <div class="field">
    <label for="email">Email de l'éditeur *</label>
    <input 
      type="email" 
      id="email" 
      name="publisherEmail"
      [(ngModel)]="book.publisherEmail"
      #email="ngModel"
      required
      email
      placeholder="contact@editeur.com">
    
    <div *ngIf="email.invalid && email.dirty" class="error">
      <span *ngIf="email.errors?.['required']">L'email est obligatoire</span>
      <span *ngIf="email.errors?.['email']">Email invalide</span>
    </div>
  </div>

  <!-- Téléphone -->
  <div class="field">
    <label for="phone">Téléphone (8 chiffres)</label>
    <input 
      type="text" 
      id="phone" 
      name="publisherPhone"
      [(ngModel)]="book.publisherPhone"
      #phone="ngModel"
      pattern="^[0-9]{8}$"
      placeholder="12345678">
    
    <div *ngIf="phone.invalid && phone.dirty" class="error">
      <span *ngIf="phone.errors?.['pattern']">8 chiffres exactement</span>
    </div>
  </div>

  <!-- Date -->
  <div class="field">
    <label for="date">Date de sortie *</label>
    <input 
      type="date" 
      id="date" 
      name="releaseDate"
      [(ngModel)]="book.releaseDate"
      #date="ngModel"
      required
      min="1900-01-01">
    
    <div *ngIf="date.invalid && date.dirty" class="error">
      <span *ngIf="date.errors?.['required']">La date est obligatoire</span>
    </div>
  </div>

  <!-- Catégorie -->
  <div class="field">
    <label for="category">Catégorie *</label>
    <select 
      id="category" 
      name="category"
      [(ngModel)]="book.category"
      #category="ngModel"
      required>
      <option value="">Choisir une catégorie</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
    
    <div *ngIf="category.invalid && category.dirty" class="error">
      <span *ngIf="category.errors?.['required']">La catégorie est obligatoire</span>
    </div>
  </div>

  <!-- Disponible -->
  <div class="field checkbox-field">
    <label>
      <input 
        type="checkbox" 
        name="isAvailable"
        [(ngModel)]="book.isAvailable">
      Livre disponible
    </label>
  </div>

  <!-- Stock -->
  <div class="field">
    <label for="stock">Stock (optionnel)</label>
    <input 
      type="number" 
      id="stock" 
      name="stock"
      [(ngModel)]="book.stock"
      #stock="ngModel"
      min="0"
      placeholder="0">
    
    <div *ngIf="stock.invalid && stock.dirty" class="error">
      <span *ngIf="stock.errors?.['min']">Le stock doit être positif</span>
    </div>
  </div>

  <!-- Boutons -->
  <div class="buttons">
    <button 
      type="submit" 
      [disabled]="bookForm.invalid || (title.dirty && isTitleOnlyNumbers(book.title || ''))"
      class="btn primary">
      {{ isEditMode ? 'Modifier' : 'Ajouter' }}
    </button>
    
    <button 
      type="button" 
      (click)="resetForm(); bookForm.resetForm()"
      class="btn secondary">
      Annuler
    </button>
  </div>

</form>